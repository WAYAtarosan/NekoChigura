n,s,k = map(int,input().split())
ad_list = {}
ans = []
for i in range(1,n+1):
    t = int(input())
    a = list(map(int,input().split()))
    ad_list[i] = a
    
def dfs(v,walk,cnt):
    global ans
    if cnt==0:
        ans.append(tuple(walk))
    else:
        for j in ad_list[v]:
            walk.append(j)
            dfs(j,walk,cnt-1)
            walk.pop()

dfs(s,[s],k)
print(len(ans))
for l in ans:
    print(*l)
