n,s,k = map(int,input().split())
ad_list = {}
ans = []
for i in range(1,n+1):
    p = int(input())
    a = list(map(int,input().split()))
    ad_list[i] = a
    
def dfs(v,path,kp):
    if kp==0:
        ans.append(tuple(path))
    else:
        for j in ad_list[v]:
            if j not in path:
                path.append(j)
                dfs(j,path,kp-1)
                path.pop()

dfs(s,[s],k)
print(len(ans))
for l in ans:
    print(*l)
